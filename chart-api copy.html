<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <html>

    <head>
        <script type="text/javascript" src=
    "https://code.jquery.com/jquery-1.12.0.min.js">
        </script>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width,
                                    initial-scale=1">
        <script src=
    "https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js">
        </script>
        <title>US Population Chart</title>
    </head>
    
    <body>
    
        <canvas id="bar-chart" width="600" height="250">
        </canvas>
        
        <script>
    
            getData();
    
            async function getData() {
                const response = await fetch(
    'https://aemce-sql-binding.azurewebsites.net/api/sql_binding_013123?');
                console.log(response);
                //const data = await eval(response);
                const data = await response.json();
                console.log(data);
                length = data.length;
                console.log(length);
    
                labels = [];
                values = [];
                for (i = 0; i < length; i++) {
                    labels.push(data[i].SMRU_Name);
                    values.push(data[i].mood);
                }
    
    
                new Chart(document.getElementById("bar-chart"), {
                    type: 'bar',
                    data: {
                        labels: labels,
                        datasets: [
                            {
                                label: "Population (millions)",
                                backgroundColor: ["#3e95cd",
                                                "#8e5ea2",
                                                "#3cba9f",
                                                "#e8c3b9",
                                                "#c45850",
                                                "#CD5C5C",
                                                "#40E0D0"],
                                data: values
                            }
                        ]
                    },
                    options: {
                        legend: { display: false },
                        title: {
                            display: true,
                            text: 'U.S population'
                        }
                    }
                });
    
            }
    
        </script>
    </body>
    
    </html>
    
    


</body>
</html>